---
import type { Props } from '@astrojs/starlight/props';
import TableOfContentsList from './TableOfContents/TableOfContentsList.astro';
import { Icon } from '@astrojs/starlight/components';

const { labels, toc } = Astro.props;

const showMiniBanner = Astro.props.slug.startsWith("open-source");

---

{
	toc && (
		<starlight-toc data-min-h={toc.minHeadingLevel} data-max-h={toc.maxHeadingLevel}>
			<nav aria-labelledby="starlight__on-this-page">
				<h2 id="starlight__on-this-page">{labels['tableOfContents.onThisPage']}</h2>
				<TableOfContentsList toc={toc.items} />
        <hr class="divider" />
        <a href="https://github.com/oramasearch/orama" target="_blank">
          <span class="love">
            <Icon name="github" />
            Loving Orama? Star us!
          </span>
        </a>
			</nav>
      {showMiniBanner && <a href="/cloud" class="mini-banner hidden xl:flex">
        <div class="mini-banner__icon">
          <img src="/orama-icon-large.png" alt="Orama Cloud" class="w-3 h-3" />
        </div>
        <div class="mini-banner__text">
          <strong class="text-xs">Looking for Orama Cloud docs?</strong>
          <span class="text-xs">Click here</span>
        </div>
      </a>}
		</starlight-toc>
	)
}

<style>
  .love {
    font-size: var(--sl-text-xs);
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 0.5rem;
  }
  .divider {
    margin: 16px 0;
    opacity: 0.1;
  }
</style>